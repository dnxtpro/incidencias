



<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" integrity="sha384-4LISF5TTJX/fLmGSxO53rV4miRxdg84mZsxmO8Rx5jGtp/LbrixFETvWa5a6sESd" crossorigin="anonymous">
<div class=" fixed-bottom ">
<div class="position-absolute bottom-0 end-0"><a class="btn-lg pull-center" (click)="abrirModal()"><i class="m-2 puto bi bi-plus-circle" style="font-size: 2.6rem"></i></a></div>
</div>
<div class="container-fluid p-0">
<div class="row">
  <mat-card-header>
    <h2>
      TICKET MANAGEMENT PAGE
    </h2>
  </mat-card-header>
</div>
<mat-divider></mat-divider>
<div class="row mt-3">
  <table mat-table [dataSource]="ticket" class="mat-elevation-z8">

    <!-- Username Column -->
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef> Id </th>
      <td mat-cell *matCellDef="let user"> {{user.id}} </td>
    </ng-container>
  
    <!-- Email Column -->
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Title </th>
      <td mat-cell *matCellDef="let user"> {{user.title}} </td>
    </ng-container>
  
    <!-- Role Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef>Description</th>
      <td mat-cell *matCellDef="let user"> {{user.description}} </td>
    </ng-container>
  
    <!-- Nombre Column -->
    <ng-container matColumnDef="creationtime">
      <th mat-header-cell *matHeaderCellDef> Created At </th>
      <td mat-cell *matCellDef="let user"> {{user.creationtime| date:'dd/MM/yyyy HH:mm:ss' }} </td>
    </ng-container>
    <ng-container matColumnDef="state">
      <th mat-header-cell *matHeaderCellDef> State</th>
      <td mat-cell *matCellDef="let user"> 
        <button [ngClass]="{
          'text-danger': user.state === 'NEW',
          'text-warning': user.state === 'En Proceso',
          'text-success': user.state === 'Completado'}"
           mat-stroked-button extended color="secondary"   [matMenuTriggerFor]="menu"><span>{{user.state}}</span> 
              <mat-icon>keyboard_arrow_down</mat-icon>
        </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item  (click)="cambiarEstado(user.id, 'En Proceso')">En Proceso</button>
        <button  mat-menu-item (click)="cambiarEstado(user.id, 'Completado')">Completado</button>
      </mat-menu>
      </td>
    </ng-container>
    <ng-container matColumnDef="user">
      <th mat-header-cell *matHeaderCellDef> User </th>
      <td mat-cell *matCellDef="let user"> {{user.user}} </td>
    </ng-container>
    
  
    <tr mat-header-row *matHeaderRowDef="['id','title','description','creationtime','state','user']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['id','title','description','creationtime','state','user'];"></tr>
  
  </table>
</div>
</div>
